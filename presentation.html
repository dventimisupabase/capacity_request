<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Capacity Request Workflow</title>
<style>
  *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
  :root{
    --bg:#1a1a2e;--bg-card:#16213e;--accent:#3ecf8e;--purple:#6c63ff;
    --rose:#f43f5e;--amber:#f59e0b;--text:#e2e8f0;--muted:#94a3b8;
    --radius:12px;--transition:0.5s cubic-bezier(.4,0,.2,1);
  }
  html,body{height:100%;overflow:hidden;font-family:'Segoe UI',system-ui,-apple-system,sans-serif;background:var(--bg);color:var(--text)}
  /* ── Slide container ── */
  .deck{position:relative;width:100%;height:100%}
  .slide{
    position:absolute;inset:0;display:flex;flex-direction:column;
    align-items:center;justify-content:center;padding:3rem 4rem;
    opacity:0;pointer-events:none;
    transition:opacity var(--transition),transform var(--transition);
  }
  .slide.enter-right{transform:translateX(60px)}
  .slide.enter-left{transform:translateX(-60px)}
  .slide.active{opacity:1;transform:translateX(0);pointer-events:auto}
  .slide.exit-left{opacity:0;transform:translateX(-60px)}
  .slide.exit-right{opacity:0;transform:translateX(60px)}
  /* ── Typography ── */
  h1{font-size:clamp(2rem,4vw,3.5rem);font-weight:700;letter-spacing:-.02em;line-height:1.15}
  h2{font-size:clamp(1.5rem,3vw,2.4rem);font-weight:600;margin-bottom:1.2rem}
  h3{font-size:1.15rem;font-weight:600;margin-bottom:.6rem;color:var(--accent)}
  p,.desc{font-size:clamp(.9rem,1.3vw,1.1rem);color:var(--muted);line-height:1.6;max-width:56ch}
  .accent{color:var(--accent)}.purple{color:var(--purple)}.rose{color:var(--rose)}.amber{color:var(--amber)}
  .tag{display:inline-block;padding:.15em .55em;border-radius:6px;font-size:.82rem;font-weight:600;margin:.15rem}
  .tag-green{background:#3ecf8e22;color:var(--accent)}
  .tag-purple{background:#6c63ff22;color:var(--purple)}
  .tag-rose{background:#f43f5e22;color:var(--rose)}
  .tag-amber{background:#f59e0b22;color:var(--amber)}
  /* ── Cards ── */
  .card{
    background:var(--bg-card);border:1px solid #ffffff0d;border-radius:var(--radius);
    padding:1.5rem;flex:1;min-width:0;
  }
  .card-icon{font-size:1.8rem;margin-bottom:.6rem;display:block}
  .cards-row{display:flex;gap:1.2rem;width:100%;max-width:1100px;margin-top:1rem}
  /* ── Navigation ── */
  .nav{
    position:fixed;bottom:1.5rem;left:50%;transform:translateX(-50%);
    display:flex;align-items:center;gap:.7rem;z-index:100;
    background:#16213ecc;backdrop-filter:blur(8px);padding:.5rem 1.2rem;
    border-radius:999px;border:1px solid #ffffff12;
  }
  .nav .dot{
    width:10px;height:10px;border-radius:50%;background:#94a3b844;
    cursor:pointer;transition:background .3s,transform .3s;
  }
  .nav .dot.active{background:var(--accent);transform:scale(1.35)}
  .nav .counter{font-size:.8rem;color:var(--muted);margin-left:.6rem;min-width:3.5ch;text-align:right}
  /* ── State Machine SVG ── */
  .state-machine-wrap{width:100%;max-width:1050px;margin:0 auto;overflow:visible}
  .state-machine-wrap svg{width:100%;height:auto}
  .sm-node rect{rx:12;ry:12;stroke-width:2;transition:fill .4s,stroke .4s}
  .sm-node text{fill:var(--text);font-size:12px;font-weight:600;text-anchor:middle;dominant-baseline:central;font-family:inherit}
  .sm-edge line,.sm-edge path{stroke:var(--muted);stroke-width:1.5;fill:none;marker-end:url(#arrow)}
  .sm-edge text{fill:var(--muted);font-size:9px;font-family:inherit}
  .sm-node.highlight rect{stroke:white;stroke-width:3;filter:drop-shadow(0 0 10px var(--accent))}
  /* ── Happy path animation ── */
  .hp-steps{display:flex;flex-direction:column;gap:.7rem;width:100%;max-width:900px;margin-top:.8rem}
  .hp-step{
    display:flex;align-items:center;gap:1rem;padding:.7rem 1rem;
    border-radius:10px;background:var(--bg-card);border:1.5px solid transparent;
    opacity:.35;transform:translateX(20px);transition:all .45s ease;
  }
  .hp-step.visible{opacity:1;transform:translateX(0)}
  .hp-step.current{border-color:var(--accent);background:#3ecf8e0c}
  .hp-step .num{
    width:2rem;height:2rem;border-radius:50%;display:flex;align-items:center;justify-content:center;
    font-size:.8rem;font-weight:700;background:var(--accent);color:var(--bg);flex-shrink:0;
  }
  .hp-step .num.done{background:var(--purple)}
  .hp-step .lbl{flex:1;font-size:.88rem}
  .hp-step .state-tag{font-size:.75rem;padding:.15em .5em;border-radius:5px;background:#3ecf8e22;color:var(--accent);white-space:nowrap}
  .hp-controls{display:flex;gap:.7rem;margin-top:.7rem;align-items:center}
  .hp-btn{
    background:var(--bg-card);border:1.5px solid var(--accent);color:var(--accent);
    padding:.4rem 1rem;border-radius:8px;cursor:pointer;font-size:.85rem;font-weight:600;
    transition:background .2s;
  }
  .hp-btn:hover{background:#3ecf8e18}
  .hp-btn.active{background:var(--accent);color:var(--bg)}
  /* ── Unhappy paths ── */
  .unhappy-cards{display:flex;gap:1.2rem;width:100%;max-width:1100px;margin-top:1rem}
  .ucard{flex:1;min-width:0}
  .ucard .path-arrow{display:flex;align-items:center;gap:.5rem;margin:.6rem 0;font-size:.85rem;color:var(--muted)}
  .ucard .path-arrow .st{padding:.2em .5em;border-radius:5px;font-weight:600;font-size:.8rem}
  /* ── Value / Guardrails two-col ── */
  .two-col{display:flex;gap:2rem;width:100%;max-width:1100px;margin-top:1rem}
  .two-col .col{flex:1;min-width:0}
  .two-col .col h3{font-size:1.1rem;margin-bottom:.7rem}
  .val-item{margin-bottom:.85rem;padding:.65rem .9rem;border-radius:8px;background:var(--bg-card);font-size:.9rem;line-height:1.5}
  .val-item strong{color:var(--text)}
  /* ── Rollout timeline ── */
  .timeline{display:flex;gap:1.5rem;width:100%;max-width:1100px;margin-top:1.2rem;position:relative}
  .timeline::before{
    content:'';position:absolute;top:1.1rem;left:0;right:0;height:3px;
    background:linear-gradient(90deg,var(--accent),var(--purple),var(--amber));border-radius:2px;
  }
  .phase{flex:1;min-width:0;position:relative;padding-top:2rem}
  .phase-dot{
    width:1.1rem;height:1.1rem;border-radius:50%;position:absolute;top:.45rem;left:1rem;z-index:1;
  }
  .phase ul{list-style:none;padding:0}
  .phase li{font-size:.85rem;color:var(--muted);padding:.25rem 0;padding-left:1.1rem;position:relative}
  .phase li::before{content:'';position:absolute;left:0;top:.55rem;width:6px;height:6px;border-radius:50%;background:var(--accent)}
  /* ── Callout ── */
  .callout{
    margin-top:1.4rem;padding:.8rem 1.2rem;border-left:3px solid var(--accent);
    background:#3ecf8e0a;border-radius:0 8px 8px 0;font-size:.95rem;max-width:700px;
  }
  /* ── Responsive ── */
  @media(max-width:900px){
    .slide{padding:2rem 1.5rem}
    .cards-row,.unhappy-cards,.two-col,.timeline{flex-direction:column}
  }
  @media(max-width:600px){
    .slide{padding:1.5rem 1rem}
    h1{font-size:1.8rem} h2{font-size:1.3rem}
  }
</style>
</head>
<body>

<div class="deck" id="deck">

<!-- ════════════ SLIDE 1 — Title ════════════ -->
<div class="slide active" data-slide="0">
  <h1 style="text-align:center">Capacity Request<br><span class="accent">Workflow</span></h1>
  <p style="text-align:center;margin-top:1.2rem;font-size:clamp(.95rem,1.4vw,1.2rem)">
    A structured, automated system for managing capacity requests<br>from submission through provisioning
  </p>
  <p style="margin-top:3rem;font-size:.85rem;color:var(--muted)">Press <kbd style="background:#ffffff12;padding:.15em .45em;border-radius:4px">&rarr;</kbd> or <kbd style="background:#ffffff12;padding:.15em .45em;border-radius:4px">Space</kbd> to navigate</p>
</div>

<!-- ════════════ SLIDE 2 — The Problem ════════════ -->
<div class="slide" data-slide="1">
  <h2>The <span class="rose">Problem</span></h2>
  <p style="margin-bottom:1.2rem">Three pain points driving the need for a structured workflow</p>
  <div class="cards-row">
    <div class="card">
      <span class="card-icon">&#128172;</span>
      <h3 style="color:var(--rose)">No Authoritative State</h3>
      <p style="font-size:.88rem">Capacity requests live as conversations in Slack. There is no single source of truth &mdash; status is scattered across threads, DMs, and tribal knowledge.</p>
    </div>
    <div class="card">
      <span class="card-icon">&#128101;</span>
      <h3 style="color:var(--rose)">Ambiguous Decision Ownership</h3>
      <p style="font-size:.88rem">Who has authority to approve, reject, or cancel expensive capacity? Without clear ownership, costly resources linger or decisions stall.</p>
    </div>
    <div class="card">
      <span class="card-icon">&#9200;</span>
      <h3 style="color:var(--rose)">No Lifecycle Enforcement</h3>
      <p style="font-size:.88rem">Customers go dark after requesting capacity. Without deadlines or automated follow-ups, money burns on provisioned-but-unused infrastructure.</p>
    </div>
  </div>
</div>

<!-- ════════════ SLIDE 3 — What We're Building ════════════ -->
<div class="slide" data-slide="2">
  <h2>What We&rsquo;re <span class="accent">Building</span></h2>
  <p style="margin-bottom:1.2rem">A workflow engine that turns ad-hoc Slack conversations into a governed process</p>
  <div class="cards-row">
    <div class="card">
      <span class="card-icon">&#128203;</span>
      <h3>Single Source of Truth</h3>
      <p style="font-size:.88rem">Every request has one canonical state. Anyone can check status at any time. Every decision is recorded with who made it and when.</p>
    </div>
    <div class="card">
      <span class="card-icon">&#9989;</span>
      <h3>Dual-Track Review</h3>
      <p style="font-size:.88rem">Commercial and technical reviewers approve in parallel &mdash; both must sign off before a request moves to the customer. Either can reject immediately.</p>
    </div>
    <div class="card">
      <span class="card-icon">&#9889;</span>
      <h3>Automated Enforcement</h3>
      <p style="font-size:.88rem">Deadlines are enforced automatically. If a customer doesn&rsquo;t respond within 7 days, the request expires. No more manual follow-ups or forgotten requests.</p>
    </div>
  </div>
  <div class="callout">
    <strong class="accent">Design principle:</strong> The entire workflow runs inside the existing Supabase stack. Teams interact through Slack &mdash; no new tools to learn.
  </div>
</div>

<!-- ════════════ SLIDE 4 — Workflow ════════════ -->
<div class="slide" data-slide="3">
  <h2>The <span class="accent">Workflow</span></h2>
  <div class="state-machine-wrap">
    <svg viewBox="0 0 960 480" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <marker id="arrow" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
          <path d="M0,0 L8,3 L0,6" fill="var(--muted)"/>
        </marker>
      </defs>

      <!-- Active-path nodes -->
      <g class="sm-node" data-state="SUBMITTED">
        <rect x="20" y="195" width="120" height="50" fill="#16213e" stroke="var(--accent)"/>
        <text x="80" y="220">Submitted</text>
      </g>
      <g class="sm-node" data-state="UNDER_REVIEW">
        <rect x="210" y="195" width="140" height="50" fill="#16213e" stroke="var(--accent)"/>
        <text x="280" y="214">Under Review</text>
        <text x="280" y="232" style="font-size:9px;fill:var(--muted);font-weight:400">commercial + technical</text>
      </g>
      <g class="sm-node" data-state="CUSTOMER_CONFIRMATION_REQUIRED">
        <rect x="420" y="195" width="140" height="50" fill="#16213e" stroke="var(--accent)"/>
        <text x="490" y="214">Awaiting</text>
        <text x="490" y="232">Customer</text>
      </g>
      <g class="sm-node" data-state="PROVISIONING">
        <rect x="630" y="195" width="130" height="50" fill="#16213e" stroke="var(--accent)"/>
        <text x="695" y="220">Provisioning</text>
      </g>
      <g class="sm-node" data-state="COMPLETED">
        <rect x="830" y="195" width="110" height="50" fill="#16213e" stroke="var(--accent)"/>
        <text x="885" y="220">Completed</text>
      </g>

      <!-- Terminal nodes -->
      <g class="sm-node" data-state="REJECTED">
        <rect x="240" y="380" width="110" height="46" fill="#16213e" stroke="var(--rose)"/>
        <text x="295" y="403" style="fill:var(--rose)">Rejected</text>
      </g>
      <g class="sm-node" data-state="EXPIRED">
        <rect x="450" y="380" width="100" height="46" fill="#16213e" stroke="var(--amber)"/>
        <text x="500" y="403" style="fill:var(--amber)">Expired</text>
      </g>
      <g class="sm-node" data-state="CANCELLED">
        <rect x="440" y="55" width="110" height="46" fill="#16213e" stroke="var(--rose)"/>
        <text x="495" y="78" style="fill:var(--rose)">Cancelled</text>
      </g>
      <g class="sm-node" data-state="FAILED">
        <rect x="660" y="380" width="100" height="46" fill="#16213e" stroke="var(--rose)"/>
        <text x="710" y="403" style="fill:var(--rose)">Failed</text>
      </g>

      <!-- ── Happy-path edges ── -->
      <g class="sm-edge">
        <line x1="140" y1="220" x2="208" y2="220"/>
      </g>
      <g class="sm-edge">
        <line x1="350" y1="220" x2="418" y2="220"/>
        <text x="356" y="212">both approve</text>
      </g>
      <g class="sm-edge">
        <line x1="560" y1="220" x2="628" y2="220"/>
        <text x="566" y="212">confirmed</text>
      </g>
      <g class="sm-edge">
        <line x1="760" y1="220" x2="828" y2="220"/>
        <text x="766" y="212">done</text>
      </g>

      <!-- Unhappy-path edges -->
      <g class="sm-edge">
        <path d="M280,245 L280,330 L295,378"/>
        <text x="215" y="320">rejected</text>
      </g>
      <g class="sm-edge">
        <line x1="490" y1="245" x2="500" y2="378"/>
        <text x="505" y="320">timeout (7d)</text>
      </g>
      <g class="sm-edge">
        <path d="M490,195 L490,140 L495,103"/>
        <text x="500" y="155">declined</text>
      </g>
      <g class="sm-edge">
        <line x1="695" y1="245" x2="710" y2="378"/>
        <text x="715" y="320">failed</text>
      </g>
      <!-- Cancel (dashed) -->
      <g class="sm-edge" style="opacity:.5">
        <line x1="80" y1="195" x2="438" y2="100" stroke-dasharray="5,3" style="stroke:var(--rose)"/>
        <text x="180" y="128" style="fill:var(--rose);font-size:8.5px">cancel (from any active state)</text>
      </g>

      <!-- Legend -->
      <g transform="translate(20,440)">
        <rect x="0" y="0" width="12" height="12" rx="3" fill="none" stroke="var(--accent)" stroke-width="2"/>
        <text x="18" y="10" style="font-size:10px;fill:var(--muted);font-family:inherit">Active state</text>
        <rect x="130" y="0" width="12" height="12" rx="3" fill="none" stroke="var(--rose)" stroke-width="2"/>
        <text x="148" y="10" style="font-size:10px;fill:var(--muted);font-family:inherit">Terminal (error / cancel)</text>
        <rect x="320" y="0" width="12" height="12" rx="3" fill="none" stroke="var(--amber)" stroke-width="2"/>
        <text x="338" y="10" style="font-size:10px;fill:var(--muted);font-family:inherit">Terminal (timeout)</text>
      </g>
    </svg>
  </div>
</div>

<!-- ════════════ SLIDE 5 — Happy Path ════════════ -->
<div class="slide" data-slide="4">
  <h2>The <span class="accent">Happy Path</span></h2>
  <div class="hp-steps" id="hp-steps">
    <div class="hp-step" data-hp="0">
      <div class="num">1</div>
      <div class="lbl">SA submits a capacity request from Slack</div>
      <span class="state-tag">Submitted &rarr; Under Review</span>
    </div>
    <div class="hp-step" data-hp="1">
      <div class="num">2</div>
      <div class="lbl">Commercial owner approves (first of two sign-offs)</div>
      <span class="state-tag" style="background:#6c63ff22;color:var(--purple)">Under Review (1/2)</span>
    </div>
    <div class="hp-step" data-hp="2">
      <div class="num">3</div>
      <div class="lbl">Technical reviewer approves (second sign-off) &mdash; both gates passed</div>
      <span class="state-tag">&rarr; Awaiting Customer</span>
    </div>
    <div class="hp-step" data-hp="3">
      <div class="num">4</div>
      <div class="lbl">Customer confirms they still need the capacity (7-day window)</div>
      <span class="state-tag">&rarr; Provisioning</span>
    </div>
    <div class="hp-step" data-hp="4">
      <div class="num">5</div>
      <div class="lbl">Infrastructure is provisioned and verified</div>
      <span class="state-tag">&rarr; Completed</span>
    </div>
  </div>
  <div class="hp-controls">
    <button class="hp-btn" id="hp-play" title="Auto-play">&#9654; Play</button>
    <button class="hp-btn" id="hp-prev" title="Previous step">&#9664;</button>
    <button class="hp-btn" id="hp-next" title="Next step">&#9654;</button>
    <button class="hp-btn" id="hp-reset" title="Reset">&#8634; Reset</button>
    <span style="font-size:.8rem;color:var(--muted)" id="hp-counter"></span>
  </div>
</div>

<!-- ════════════ SLIDE 6 — Unhappy Paths ════════════ -->
<div class="slide" data-slide="5">
  <h2>Built-in <span class="rose">Safeguards</span></h2>
  <p style="margin-bottom:.5rem">The system handles edge cases automatically &mdash; no manual chasing required</p>
  <div class="unhappy-cards">
    <div class="card ucard">
      <span class="card-icon">&#9200;</span>
      <h3 style="color:var(--amber)">Customer Goes Dark</h3>
      <p style="font-size:.88rem;color:var(--muted);margin-bottom:.5rem">If the customer doesn&rsquo;t respond within the confirmation window, the request automatically expires.</p>
      <div class="path-arrow">
        <span class="st tag-green">Awaiting Customer</span>
        <span>&rarr;</span>
        <span class="st tag-amber">Expired</span>
      </div>
      <p style="font-size:.85rem;color:var(--muted)">Default: 7 days. Configurable per request. Team is notified in Slack.</p>
    </div>
    <div class="card ucard">
      <span class="card-icon">&#10060;</span>
      <h3 style="color:var(--rose)">Review Rejected</h3>
      <p style="font-size:.88rem;color:var(--muted);margin-bottom:.5rem">Either the commercial or technical reviewer can reject a request with a stated reason.</p>
      <div class="path-arrow">
        <span class="st tag-green">Under Review</span>
        <span>&rarr;</span>
        <span class="st tag-rose">Rejected</span>
      </div>
      <p style="font-size:.85rem;color:var(--muted)">Immediate. Reason and reviewer identity are recorded.</p>
    </div>
    <div class="card ucard">
      <span class="card-icon">&#128683;</span>
      <h3 style="color:var(--rose)">Cancelled Mid-Flight</h3>
      <p style="font-size:.88rem;color:var(--muted);margin-bottom:.5rem">An authorized person can cancel any active request at any stage.</p>
      <div class="path-arrow">
        <span class="st tag-purple">Any active state</span>
        <span>&rarr;</span>
        <span class="st tag-rose">Cancelled</span>
      </div>
      <p style="font-size:.85rem;color:var(--muted)">Requires authorization. Reason and authorizer are recorded.</p>
    </div>
  </div>
</div>

<!-- ════════════ SLIDE 7 — Why This Matters ════════════ -->
<div class="slide" data-slide="6">
  <h2>Why This <span class="accent">Matters</span></h2>
  <div class="two-col">
    <div class="col">
      <h3>For the Business</h3>
      <div class="val-item">
        <strong>Stop burning money on forgotten capacity</strong><br>
        <span style="color:var(--muted)">Automatic expiration means no more provisioned infrastructure sitting idle because a customer never responded.</span>
      </div>
      <div class="val-item">
        <strong>Clear accountability for every decision</strong><br>
        <span style="color:var(--muted)">Every approval, rejection, and cancellation is attributed to a named person with a timestamp. No more "who approved this?"</span>
      </div>
      <div class="val-item">
        <strong>Faster time to provisioning</strong><br>
        <span style="color:var(--muted)">Parallel reviews and automated notifications eliminate hand-off delays. Requests don&rsquo;t get stuck waiting in someone&rsquo;s queue.</span>
      </div>
    </div>
    <div class="col">
      <h3 style="color:var(--purple)">For the Teams</h3>
      <div class="val-item">
        <strong>No new tools &mdash; everything happens in Slack</strong><br>
        <span style="color:var(--muted)">SAs submit requests, reviewers approve, and customers confirm all through Slack interactions they already know.</span>
      </div>
      <div class="val-item">
        <strong>Full visibility into every request</strong><br>
        <span style="color:var(--muted)">Anyone can check the current state of any request at any time. No more asking around or digging through threads.</span>
      </div>
      <div class="val-item">
        <strong>Complete audit trail</strong><br>
        <span style="color:var(--muted)">Every state change is logged as an immutable event. Useful for compliance reviews, post-mortems, and trend analysis.</span>
      </div>
    </div>
  </div>
</div>

<!-- ════════════ SLIDE 8 — Guardrails ════════════ -->
<div class="slide" data-slide="7">
  <h2><span class="purple">Guardrails</span></h2>
  <p style="margin-bottom:1rem">Trust built into the system by design</p>
  <div class="cards-row">
    <div class="card">
      <span class="card-icon">&#128274;</span>
      <h3>Verified Identity</h3>
      <p style="font-size:.88rem">Every action is cryptographically verified as coming from Slack. Every decision records who made it. No one can impersonate another user.</p>
    </div>
    <div class="card">
      <span class="card-icon">&#128737;</span>
      <h3 style="color:var(--purple)">No Partial States</h3>
      <p style="font-size:.88rem">State transitions are atomic &mdash; a request either fully moves to the next state or doesn&rsquo;t move at all. Notifications only go out for committed changes.</p>
    </div>
    <div class="card">
      <span class="card-icon">&#128209;</span>
      <h3 style="color:var(--amber)">Immutable History</h3>
      <p style="font-size:.88rem">The event log is append-only. Past decisions cannot be altered or deleted. The full history of every request is always available.</p>
    </div>
  </div>
  <div class="callout" style="margin-top:1.5rem">
    <strong class="accent">Secrets &amp; access:</strong> All credentials are encrypted at rest. Write access to request state is restricted to the workflow engine itself &mdash; no direct edits possible.
  </div>
</div>

<!-- ════════════ SLIDE 9 — Rollout ════════════ -->
<div class="slide" data-slide="8">
  <h2><span class="accent">Rollout</span> Plan</h2>
  <p style="margin-bottom:.5rem">Incremental delivery &mdash; each phase is independently valuable</p>
  <div class="timeline">
    <div class="phase">
      <div class="phase-dot" style="background:var(--accent)"></div>
      <div class="card" style="border-top:3px solid var(--accent)">
        <h3>Phase 1 &mdash; MVP</h3>
        <p style="font-size:.85rem;color:var(--muted);margin-bottom:.5rem">Core workflow up and running</p>
        <ul>
          <li>Submit requests from Slack</li>
          <li>Parallel commercial + technical review</li>
          <li>Customer confirmation with deadline</li>
          <li>Automatic expiration of stale requests</li>
          <li>Slack notifications at every state change</li>
        </ul>
      </div>
    </div>
    <div class="phase">
      <div class="phase-dot" style="background:var(--purple)"></div>
      <div class="card" style="border-top:3px solid var(--purple)">
        <h3 style="color:var(--purple)">Phase 2 &mdash; Polish</h3>
        <p style="font-size:.85rem;color:var(--muted);margin-bottom:.5rem">Operational confidence</p>
        <ul>
          <li>Linear issue tracking integration</li>
          <li>Guaranteed notification delivery</li>
          <li>Escalation for high-value requests</li>
          <li>Warning alerts before deadlines</li>
          <li>Reporting dashboard</li>
        </ul>
      </div>
    </div>
    <div class="phase">
      <div class="phase-dot" style="background:var(--amber)"></div>
      <div class="card" style="border-top:3px solid var(--amber)">
        <h3 style="color:var(--amber)">Phase 3 &mdash; Automation</h3>
        <p style="font-size:.85rem;color:var(--muted);margin-bottom:.5rem">Scale and self-service</p>
        <ul>
          <li>Automated provisioning integration</li>
          <li>Web UI for request management</li>
          <li>Self-service customer portal</li>
          <li>Advanced analytics &amp; trends</li>
        </ul>
      </div>
    </div>
  </div>
</div>

</div><!-- /deck -->

<!-- Navigation dots -->
<nav class="nav" id="nav"></nav>

<script>
(function(){
  'use strict';

  const TOTAL = 9;
  let current = 0;

  /* ── Build nav dots ── */
  const nav = document.getElementById('nav');
  for (let i = 0; i < TOTAL; i++) {
    const d = document.createElement('span');
    d.className = 'dot' + (i === 0 ? ' active' : '');
    d.dataset.i = i;
    d.addEventListener('click', () => goTo(i));
    nav.appendChild(d);
  }
  const counter = document.createElement('span');
  counter.className = 'counter';
  counter.textContent = '1 / ' + TOTAL;
  nav.appendChild(counter);

  const slides = document.querySelectorAll('.slide');
  const dots = document.querySelectorAll('.dot');

  function goTo(n) {
    if (n < 0 || n >= TOTAL || n === current) return;
    const forward = n > current;
    const prev = current;

    slides[prev].classList.remove('active');
    slides[prev].classList.add(forward ? 'exit-left' : 'exit-right');

    slides[n].classList.add(forward ? 'enter-right' : 'enter-left');
    void slides[n].offsetWidth;

    slides[n].classList.remove('enter-right', 'enter-left');
    slides[n].classList.add('active');

    current = n;

    setTimeout(() => {
      slides[prev].classList.remove('exit-left', 'exit-right');
    }, 550);

    dots.forEach((d, i) => d.classList.toggle('active', i === current));
    counter.textContent = (current + 1) + ' / ' + TOTAL;
    if (current === 4) resetHP();
  }

  /* ── Keyboard nav ── */
  document.addEventListener('keydown', e => {
    if (e.key === 'ArrowRight' || e.key === ' ') { e.preventDefault(); goTo(current + 1); }
    if (e.key === 'ArrowLeft') { e.preventDefault(); goTo(current - 1); }
  });

  /* ── Happy Path stepper ── */
  const hpSteps = document.querySelectorAll('.hp-step');
  let hpIdx = -1;
  let hpTimer = null;

  function showHP(n) {
    hpIdx = Math.max(-1, Math.min(n, hpSteps.length - 1));
    hpSteps.forEach((s, i) => {
      s.classList.toggle('visible', i <= hpIdx);
      s.classList.toggle('current', i === hpIdx);
      const num = s.querySelector('.num');
      if (num) num.classList.toggle('done', i < hpIdx);
    });
    updateHPCounter();
  }

  function resetHP() {
    stopAutoPlay();
    hpIdx = -1;
    hpSteps.forEach(s => { s.classList.remove('visible', 'current'); s.querySelector('.num').classList.remove('done'); });
    updateHPCounter();
  }

  function updateHPCounter() {
    const c = document.getElementById('hp-counter');
    if (hpIdx < 0) c.textContent = 'Ready';
    else c.textContent = 'Step ' + (hpIdx + 1) + ' / ' + hpSteps.length;
  }

  function stopAutoPlay() {
    if (hpTimer) { clearInterval(hpTimer); hpTimer = null; }
    document.getElementById('hp-play').classList.remove('active');
    document.getElementById('hp-play').innerHTML = '&#9654; Play';
  }

  document.getElementById('hp-next').addEventListener('click', () => { stopAutoPlay(); showHP(hpIdx + 1); });
  document.getElementById('hp-prev').addEventListener('click', () => { stopAutoPlay(); showHP(hpIdx - 1); });
  document.getElementById('hp-reset').addEventListener('click', resetHP);
  document.getElementById('hp-play').addEventListener('click', function() {
    if (hpTimer) { stopAutoPlay(); return; }
    this.classList.add('active');
    this.innerHTML = '&#9724; Pause';
    if (hpIdx >= hpSteps.length - 1) resetHP();
    showHP(hpIdx + 1);
    hpTimer = setInterval(() => {
      if (hpIdx >= hpSteps.length - 1) { stopAutoPlay(); return; }
      showHP(hpIdx + 1);
    }, 1800);
  });

  /* ── State Machine highlight on slide 4 ── */
  const happyStates = ['SUBMITTED','UNDER_REVIEW','CUSTOMER_CONFIRMATION_REQUIRED','PROVISIONING','COMPLETED'];
  let smTimer = null;

  function animateSM() {
    if (smTimer) clearInterval(smTimer);
    let si = 0;
    document.querySelectorAll('.sm-node').forEach(n => n.classList.remove('highlight'));
    smTimer = setInterval(() => {
      document.querySelectorAll('.sm-node').forEach(n => n.classList.remove('highlight'));
      if (si >= happyStates.length) { clearInterval(smTimer); smTimer = null; return; }
      const node = document.querySelector('.sm-node[data-state="' + happyStates[si] + '"]');
      if (node) node.classList.add('highlight');
      si++;
    }, 1200);
  }

  const observer = new MutationObserver(() => {
    if (slides[3].classList.contains('active')) animateSM();
    else { if (smTimer) { clearInterval(smTimer); smTimer = null; } document.querySelectorAll('.sm-node').forEach(n => n.classList.remove('highlight')); }
  });
  slides[3] && observer.observe(slides[3], { attributes: true, attributeFilter: ['class'] });

})();
</script>
</body>
</html>
